<%= render "shared/header" %>

<%= form_with(url: search_tweets_path, local: true, method: :get, class: "search-form") do |form| %>
  <%= form.text_field :keyword, placeholder: "投稿を検索する", class: "search-input" %>
  <%= form.submit "検索", class: "search-btn" %>
<% end %>

<div class="contents">
<ul class='tweet-lists'>
  <% @tweets.each do |tweet| %>
    <li class='tweet-list'>
      <%= link_to tweet_path(tweet.id), class: "no-underline" do %>
        <div class="upper-content">
          <div class="content-user">
            <%= tweet.user.nickname %>
          </div>
          <div class="content-date">
            <%= tweet.created_at %>
          </div>
        </div>
        <div class="lower-content">
          <div class="content-tweet">
            <%= tweet.text %>
          </div>
          <%= image_tag tweet.image.variant(resize: '450x450'), class: 'tweet-image' if tweet.image.attached? %>
        </div>
      <% end %>
    </li>
    <div class="margin"></div>
  <% end %>
</ul>
</div>

<%if user_signed_in? %>
  <%= link_to(new_room_path, class: 'message-btn') do %>
    <span class='message-btn-text'>メッセージ</span>
    <%= image_tag 'icon-256.png' , size: '185x50' ,class: "message-btn-icon" %>
  <% end %>
  <%= link_to(new_tweet_path, class: 'post-btn') do %>
    <span class='post-btn-text'>投稿する</span>
    <%= image_tag 'icon-255.png' , size: '185x50' ,class: "post-btn-icon" %>
  <% end %>
<% else %>
  <%= link_to(new_user_session_path, class: 'message-btn') do %>
    <span class='message-btn-text'>メッセージ</span>
    <%= image_tag 'icon-256.png' , size: '185x50' ,class: "message-btn-icon" %>
  <% end %>
  <%= link_to(new_user_session_path, class: 'post-btn') do %>
    <span class='post-btn-text'>投稿する</span>
    <%= image_tag 'icon-255.png' , size: '185x50' ,class: "post-btn-icon" %>
  <% end %>
<% end %>

<%= render "shared/footer" %>


