<%= render "shared/header" %>

<div class="box2">
  <div class="box-inner">
    <%= form_with model: @tweet, url: tweets_path, class: 'registration-main', local: true do |f| %>
      <h1>投稿</h1>
      <div class="form-text">
        <%= f.text_area :text, class:"input", id:"text", placeholder:"例) おはよう！", autofocus: true %>
      </div>
      <form>
        <input type="file" accept='image/*' onchange="previewImage(this);">
      </form>
      <p>
        プレビュー:<br>
        <img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="max-width:200px;">
      </p>
      <div class="box-send">
        <%= f.submit "投稿" %>
      </div>
    <% end %>
  </div>
</div>

<script>
  function previewImage(obj) {
	  var fileReader = new FileReader();
      fileReader.onload = (function() {
		  document.getElementById('preview').src = fileReader.result;
	  });
	  fileReader.readAsDataURL(obj.files[0]);
  }
</script>

<%= render "shared/footer" %>